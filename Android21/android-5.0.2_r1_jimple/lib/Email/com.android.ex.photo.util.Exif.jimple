public class com.android.ex.photo.util.Exif extends java.lang.Object
{
    private static final java.lang.String TAG;

    public void <init>()
    {
        com.android.ex.photo.util.Exif r0;

        r0 := @this: com.android.ex.photo.util.Exif;

        specialinvoke r0.<java.lang.Object: void <init>()>();

        return;
    }

    public static int getOrientation(java.io.InputStream, long)
    {
        java.io.InputStream r0;
        long l0;
        com.android.ex.photo.util.InputStreamBuffer r1, $r2;
        int i3, i4, i5, i6, $i7, $i8, $i10, $i11, $i12, $i13, $i14, $i15, $i17, $i20, $i23, $i24, $i26, $i27, $i28, $i29, $i31, $i32, i35, i36, i37, i38, i39, i40;
        boolean z0, z1, $z2, $z3, $z4, $z5, $z6;
        byte $b19, $b21, $b30, $b33;
        short $s22, s34;

        r0 := @parameter0: java.io.InputStream;

        l0 := @parameter1: long;

        if r0 != null goto label01;

        return 0;

     label01:
        $r2 = new com.android.ex.photo.util.InputStreamBuffer;

        specialinvoke $r2.<com.android.ex.photo.util.InputStreamBuffer: void <init>(java.io.InputStream,int,boolean)>(r0, 16, 0);

        r1 = $r2;

        i3 = 0;

        i4 = 0;

        $z2 = staticinvoke <com.android.ex.photo.util.Exif: boolean has(com.android.ex.photo.util.InputStreamBuffer,long,int)>(r1, l0, 1);

        if $z2 == 0 goto label04;

        $b30 = virtualinvoke r1.<com.android.ex.photo.util.InputStreamBuffer: byte get(int)>(0);

        if $b30 != -1 goto label02;

        $b33 = virtualinvoke r1.<com.android.ex.photo.util.InputStreamBuffer: byte get(int)>(1);

        if $b33 != -40 goto label02;

        $z6 = 1;

        goto label03;

     label02:
        $z6 = 0;

     label03:
        z0 = $z6;

        if z0 != 0 goto label04;

        return 0;

     label04:
        $i7 = i3 + 3;

        $z3 = staticinvoke <com.android.ex.photo.util.Exif: boolean has(com.android.ex.photo.util.InputStreamBuffer,long,int)>(r1, l0, $i7);

        if $z3 == 0 goto label12;

        $i17 = i3;

        i3 = i3 + 1;

        $b21 = virtualinvoke r1.<com.android.ex.photo.util.InputStreamBuffer: byte get(int)>($i17);

        $s22 = $b21 & 255;

        if $s22 != 255 goto label12;

        $b19 = virtualinvoke r1.<com.android.ex.photo.util.InputStreamBuffer: byte get(int)>(i3);

        s34 = $b19 & 255;

        if s34 != 255 goto label05;

        goto label04;

     label05:
        i3 = i3 + 1;

        if s34 == 216 goto label04;

        if s34 != 1 goto label06;

        goto label04;

     label06:
        if s34 == 217 goto label07;

        if s34 != 218 goto label08;

     label07:
        $i20 = i3 - 4;

        virtualinvoke r1.<com.android.ex.photo.util.InputStreamBuffer: void advanceTo(int)>($i20);

        goto label12;

     label08:
        i35 = staticinvoke <com.android.ex.photo.util.Exif: int pack(com.android.ex.photo.util.InputStreamBuffer,int,int,boolean)>(r1, i3, 2, 0);

        if i35 < 2 goto label09;

        $i23 = i3 + i35;

        $i24 = $i23 - 1;

        $z5 = staticinvoke <com.android.ex.photo.util.Exif: boolean has(com.android.ex.photo.util.InputStreamBuffer,long,int)>(r1, l0, $i24);

        if $z5 != 0 goto label10;

     label09:
        staticinvoke <android.util.Log: int e(java.lang.String,java.lang.String)>("CameraExif", "Invalid length");

        return 0;

     label10:
        if s34 != 225 goto label11;

        if i35 < 8 goto label11;

        $i26 = i3 + 2;

        $i27 = staticinvoke <com.android.ex.photo.util.Exif: int pack(com.android.ex.photo.util.InputStreamBuffer,int,int,boolean)>(r1, $i26, 4, 0);

        if $i27 != 1165519206 goto label11;

        $i31 = i3 + 6;

        $i32 = staticinvoke <com.android.ex.photo.util.Exif: int pack(com.android.ex.photo.util.InputStreamBuffer,int,int,boolean)>(r1, $i31, 2, 0);

        if $i32 != 0 goto label11;

        i3 = i3 + 8;

        i4 = i35 + -8;

        $i29 = i3 - 4;

        virtualinvoke r1.<com.android.ex.photo.util.InputStreamBuffer: void advanceTo(int)>($i29);

        goto label12;

     label11:
        i3 = i3 + i35;

        i4 = 0;

        $i28 = i3 - 4;

        virtualinvoke r1.<com.android.ex.photo.util.InputStreamBuffer: void advanceTo(int)>($i28);

        goto label04;

     label12:
        if i4 <= 8 goto label25;

        i36 = staticinvoke <com.android.ex.photo.util.Exif: int pack(com.android.ex.photo.util.InputStreamBuffer,int,int,boolean)>(r1, i3, 4, 0);

        if i36 == 1229531648 goto label13;

        if i36 == 1296891946 goto label13;

        staticinvoke <android.util.Log: int e(java.lang.String,java.lang.String)>("CameraExif", "Invalid byte order");

        return 0;

     label13:
        if i36 != 1229531648 goto label14;

        $z4 = 1;

        goto label15;

     label14:
        $z4 = 0;

     label15:
        z1 = $z4;

        $i8 = i3 + 4;

        $i10 = staticinvoke <com.android.ex.photo.util.Exif: int pack(com.android.ex.photo.util.InputStreamBuffer,int,int,boolean)>(r1, $i8, 4, z1);

        i5 = $i10 + 2;

        if i5 < 10 goto label16;

        if i5 <= i4 goto label17;

     label16:
        staticinvoke <android.util.Log: int e(java.lang.String,java.lang.String)>("CameraExif", "Invalid offset");

        return 0;

     label17:
        i37 = i3 + i5;

        i38 = i4 - i5;

        $i12 = i37 - 4;

        virtualinvoke r1.<com.android.ex.photo.util.InputStreamBuffer: void advanceTo(int)>($i12);

        $i11 = i37 - 2;

        i39 = staticinvoke <com.android.ex.photo.util.Exif: int pack(com.android.ex.photo.util.InputStreamBuffer,int,int,boolean)>(r1, $i11, 2, z1);

     label18:
        $i13 = i39;

        i39 = i39 + -1;

        if $i13 <= 0 goto label25;

        if i38 < 12 goto label25;

        i40 = staticinvoke <com.android.ex.photo.util.Exif: int pack(com.android.ex.photo.util.InputStreamBuffer,int,int,boolean)>(r1, i37, 2, z1);

        if i40 != 274 goto label24;

        $i15 = i37 + 8;

        i6 = staticinvoke <com.android.ex.photo.util.Exif: int pack(com.android.ex.photo.util.InputStreamBuffer,int,int,boolean)>(r1, $i15, 2, z1);

        tableswitch(i6)
        {
            case 1: goto label19;
            case 2: goto label23;
            case 3: goto label20;
            case 4: goto label23;
            case 5: goto label23;
            case 6: goto label21;
            case 7: goto label23;
            case 8: goto label22;
            default: goto label23;
        };

     label19:
        return 0;

     label20:
        return 180;

     label21:
        return 90;

     label22:
        return 270;

     label23:
        staticinvoke <android.util.Log: int i(java.lang.String,java.lang.String)>("CameraExif", "Unsupported orientation");

        return 0;

     label24:
        i37 = i37 + 12;

        i38 = i38 + -12;

        $i14 = i37 - 4;

        virtualinvoke r1.<com.android.ex.photo.util.InputStreamBuffer: void advanceTo(int)>($i14);

        goto label18;

     label25:
        return 0;
    }

    private static int pack(com.android.ex.photo.util.InputStreamBuffer, int, int, boolean)
    {
        com.android.ex.photo.util.InputStreamBuffer r0;
        int i0, i1, i3, $i4, $i5, $i8;
        boolean z0;
        byte b2, $b6;
        short $s7;

        r0 := @parameter0: com.android.ex.photo.util.InputStreamBuffer;

        i0 := @parameter1: int;

        i1 := @parameter2: int;

        z0 := @parameter3: boolean;

        b2 = 1;

        if z0 == 0 goto label1;

        $i8 = i1 - 1;

        i0 = i0 + $i8;

        b2 = -1;

     label1:
        i3 = 0;

     label2:
        $i4 = i1;

        i1 = i1 + -1;

        if $i4 <= 0 goto label3;

        $i5 = i3 << 8;

        $b6 = virtualinvoke r0.<com.android.ex.photo.util.InputStreamBuffer: byte get(int)>(i0);

        $s7 = $b6 & 255;

        i3 = $i5 | $s7;

        i0 = i0 + b2;

        goto label2;

     label3:
        return i3;
    }

    private static boolean has(com.android.ex.photo.util.InputStreamBuffer, long, int)
    {
        com.android.ex.photo.util.InputStreamBuffer r0;
        long l0, $l3;
        int i1;
        byte $b2, $b4;
        boolean $z0, $z1;

        r0 := @parameter0: com.android.ex.photo.util.InputStreamBuffer;

        l0 := @parameter1: long;

        i1 := @parameter2: int;

        $b2 = l0 cmp 0L;

        if $b2 < 0 goto label3;

        $l3 = (long) i1;

        $b4 = $l3 cmp l0;

        if $b4 >= 0 goto label1;

        $z1 = 1;

        goto label2;

     label1:
        $z1 = 0;

     label2:
        return $z1;

     label3:
        $z0 = virtualinvoke r0.<com.android.ex.photo.util.InputStreamBuffer: boolean has(int)>(i1);

        return $z0;
    }

    public static int getOrientation(byte[])
    {
        byte[] r0;
        java.io.ByteArrayInputStream $r1;
        int $i0, $i2;
        long $l1;

        r0 := @parameter0: byte[];

        $r1 = new java.io.ByteArrayInputStream;

        specialinvoke $r1.<java.io.ByteArrayInputStream: void <init>(byte[])>(r0);

        $i0 = lengthof r0;

        $l1 = (long) $i0;

        $i2 = staticinvoke <com.android.ex.photo.util.Exif: int getOrientation(java.io.InputStream,long)>($r1, $l1);

        return $i2;
    }

    public static void <clinit>()
    {
        <com.android.ex.photo.util.Exif: java.lang.String TAG> = "CameraExif";

        return;
    }
}
